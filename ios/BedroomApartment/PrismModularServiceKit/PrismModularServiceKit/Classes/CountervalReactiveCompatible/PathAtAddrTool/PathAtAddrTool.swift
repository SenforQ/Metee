
//: Declare String Begin

/*: "http://" :*/
fileprivate let userMakeMsg:[Character] = ["h","t","t","p",":","/","/"]

/*: "https://" :*/
fileprivate let appPushMsg:String = "hhiddenps"
fileprivate let appProduceLabelData:[Character] = [":","/","/"]

/*: "http:// :*/
fileprivate let kValueShareMessage:String = "HT"
fileprivate let constIndexMessage:String = "tp://space target file self in"

/*: "serverSelctIndex =  :*/
fileprivate let kSucceedKey:String = "seskinv"
fileprivate let appManagerKey:String = "name fromlctIn"

/*: "serverUrlStr =  :*/
fileprivate let k_proFormat:String = "giftrver"
fileprivate let user_levelStr:String = "return label from state addtr ="
fileprivate let mainViewTitle:String = " "

/*: "app. :*/
fileprivate let showTempPath:String = "app.self in color left block"

/*: .com" :*/
fileprivate let main_overLengthData:String = "self true of interval.com"

/*: "mf/chatRoom/sendGift" :*/
fileprivate let main_reportTitle:[Character] = ["m","f","/","c","h","a","t","R","o","o","m","/"]
fileprivate let main_equalName:[Character] = ["s"]
fileprivate let main_toMsg:[Character] = ["e","n","d","G","i","f","t"]

/*: "recharge/applePayNotify" :*/
fileprivate let noti_currentVideoPackageMessage:[Character] = ["r","e","c","h","a","r","g","e","/","a","p","p","l","e","P","a","y","N","o","t","i","f","y"]

/*: "user/appleLogin" :*/
fileprivate let showListKey:String = "serviceser"
fileprivate let userInfoMessage:String = "color let location extensionLogin"

/*: "IM/getMyBlackList" :*/
fileprivate let dataOfFormat:[Character] = ["I","M"]
fileprivate let userManagerFormat:[Character] = ["/","g","e","t","M","y","B","l","a","c","k","L","i","s","t"]

/*: "mf/business/sendMsg" :*/
fileprivate let data_blockPath:String = "mf/btitle index crush"
fileprivate let app_backgroundMessage:String = "uslabe"
fileprivate let constFeeStr:String = "case profilendMsg"

/*: "mf/business/sendGift" :*/
fileprivate let user_sectionKey:[Character] = ["m","f","/","b","u","s","i","n","e","s","s","/","s","e","n"]
fileprivate let app_mScaleUrl:String = "return case color havedGift"

/*: "mf/chatRoom/sendMsg" :*/
fileprivate let notiGestureId:[Character] = ["m","f","/","c","h","a","t","R","o","o","m","/","s","e","n","d","M","s","g"]

/*: "en" :*/
fileprivate let show_becomeValue:[Character] = ["e","n"]

/*: "ar" :*/
fileprivate let const_styleMsg:String = "awill"

/*: "es" :*/
fileprivate let dataManagerStr:[Character] = ["e","s"]

/*: "pt" :*/
fileprivate let mainStartStr:[Character] = ["p","t"]

/*: "GJ21FB" :*/
fileprivate let appLabelFormat:String = "GJ2normalB"

/*: "ÂÆåÊàê‰∫ÜÊ£ÄÊµã,ËØ∑Ê±ÇÁä∂ÊÄÅÊ≠£Â∏∏" :*/
fileprivate let show_cellReloadMessage:String = "ÂÆådefine‰∫ÜÊ£ÄÊµã,"
fileprivate let noti_itemPath:String = "ËØ∑"
fileprivate let show_onMessage:String = "Ê±ÇÁä∂ÊÄÅÊ≠£\u{5e38}"

/*: "Êé•Âè£ËØ∑Ê±ÇÂ§±Ë¥•" :*/
fileprivate let data_colorCountTitle:[Character] = ["Êé•","Âè£","ËØ∑","Ê±Ç","Â§±"]
fileprivate let mainEqualStr:String = "request"

/*: "ÂÆåÊàê‰∫ÜÊ£ÄÊµã,ÈúÄË¶ÅÊõ¥Êç¢server url" :*/
fileprivate let main_hiddenFormat:String = "ÂÆå\u{6210}‰∫Ü\u{68c0}"
fileprivate let kNetMessage:String = "\u{66f4}Êç¢serv"
fileprivate let noti_modelIconBarStr:String = "er urlcenter gen layer"

/*: "HTTPProxy" :*/
fileprivate let kViewPath:[Character] = ["H","T","T","P","P"]
fileprivate let kFrameMsg:String = "actualoxy"

/*: "__SCOPED__" :*/
fileprivate let kColorFormat:[Character] = ["_","_","S","C","O","P","E","D","_","_"]

/*: "tap" :*/
fileprivate let k_kitEqualStr:String = "fromap"

/*: "tun" :*/
fileprivate let app_imageId:String = "tplain"

/*: "ipsec" :*/
fileprivate let constTitleUserKey:[Character] = ["i","p","s","e","c"]

/*: "ppp" :*/
fileprivate let k_leadingEqualMessage:[Character] = ["p","p","p"]

/*: "func__updateTalkingCookies =  :*/
fileprivate let constViewTimeData:String = "model message self facefunc__"
fileprivate let userAwakeMessage:String = "Talkiself actual model"
fileprivate let main_nameImageUrl:[Character] = ["k","i","e","s"," ","="," "]

/*: "https:// :*/
fileprivate let constBlockMessage:[Character] = ["h","t","t","p","s",":","/","/"]

/*: "func__deleteSameCookiesWithUrl =  :*/
fileprivate let noti_appMessage:[UInt8] = [0xe1,0xf2,0xe9,0xe4,0xd8,0xd8,0xe3,0xe2,0xeb,0xe2,0xf3,0xe2,0xd4,0xe6,0xea,0xe2,0xc4,0xe8,0xe8,0xec,0xee,0xe2,0xf4,0xd0,0xee,0xf3,0xef,0xd2,0xf5,0xeb,0xa7,0xba,0xa7]

private func commentView(array num: UInt8) -> UInt8 {
    return num ^ 135
}

/*: "UID" :*/
fileprivate let showLanguageContent:String = "Utransform"

/*: "PHPSESSID" :*/
fileprivate let kServerName:String = "message"
fileprivate let const_appearAreaContent:String = "sizePSESSID"

/*: "func__saveAllCookies =  :*/
fileprivate let k_popContent:String = "funkit"
fileprivate let data_viewStr:String = "veAlsource corner to let"
fileprivate let const_statusTitle:String = "class let add var andkies = "

/*: "func__saveAllCookies  error" :*/
fileprivate let app_iconId:String = "manager view makefunc_"
fileprivate let k_suiteValue:String = "model original text showeAll"
fileprivate let main_constraintStr:String = "managerror"

/*: "üç™ Âà†Èô§ :*/
fileprivate let kAddFillLetData:[Character] = ["üç™"," ","Âà†","Èô§"]

//: Declare String End

// __DEBUG__
// __CLOSE_PRINT__
//
//  PathAtAddrTool.swift
//  AbroadTalking
//
//  Created by Hemming on 2022/8/23.
//

//: import UIKit
import UIKit
//: import WebKit
import WebKit

//: enum LangType: String {
enum ClickConvertible: String {
    //: case en = "en"
    case en
    //: case ar = "ar"
    case ar
    //: case es = "es"
    case es
    //: case pt = "pt"
    case pt
}

//: public class TalkingRequestAddrTool: NSObject {
public class PathAtAddrTool: NSObject {
    //: @objc static public let share = TalkingRequestAddrTool()
    @objc public static let share = PathAtAddrTool()
    //: private override init() {
    override private init() {
        //: super.init()
        super.init()
        //: setUp()
        insertStatusUpwardly()
    }

    //: private var timerDispose: Disposable?
    private var timerDispose: Disposable?

    //: var serverSelctIndex = 0
    var serverSelctIndex = 0
    //: var hasFinishCheck   = false
    var hasFinishCheck = false
    //: var hostCheckNum     = 0
    var hostCheckNum = 0

    //: var domainStr: String?
    var domainStr: String? // Áî®Êà∑ÁôªÂΩïÁöÑ‰ø°ÊÅØ
    //: var _serverUrlStr: String = ""       //
    var _serverUrlStr: String = "" //

    //: @objc public var serverUrlStr: String {
    @objc public var serverUrlStr: String {
        //: get {
        get {
            //: return _serverUrlStr
            return _serverUrlStr
        }
        //: set {
        set {
            //: var newServerUrl: String = ""
            var newServerUrl: String = ""
            //: if newValue.hasPrefix("http://") || newValue.hasPrefix("https://") {
            if newValue.hasPrefix((String(userMakeMsg))) || newValue.hasPrefix((appPushMsg.replacingOccurrences(of: "hidden", with: "tt") + String(appProduceLabelData))) {
                //: newServerUrl = newValue
                newServerUrl = newValue
                //: } else {
            } else {
                //: if Environment_Formal && !Encryption_Request {
                if notiBackData && !const_barStr {
                    //: newServerUrl = "http://\(newValue )"
                    newServerUrl = (kValueShareMessage.lowercased() + String(constIndexMessage.prefix(5))) + "\(newValue)"
                    //: } else {
                } else {
                    //: newServerUrl = "http://\(newValue )"
                    newServerUrl = (kValueShareMessage.lowercased() + String(constIndexMessage.prefix(5))) + "\(newValue)"
                }
            }
            //: if NSURL.init(string: newServerUrl) == nil {
            if NSURL(string: newServerUrl) == nil {
                //: return
                return
            }
            //: let oldServerUrl: String = _serverUrlStr
            let oldServerUrl: String = _serverUrlStr

            //: if oldServerUrl.isEmptyString || oldServerUrl != newServerUrl {
            if oldServerUrl.isEmptyString || oldServerUrl != newServerUrl {
                //: _serverUrlStr = newServerUrl
                _serverUrlStr = newServerUrl
                //: if oldServerUrl.count > 0 {
                if oldServerUrl.count > 0 {
                    //: let oldCookies: [HTTPCookie] = HTTPCookieStorage.shared.cookies(for: URL.init(string: oldServerUrl)!)!
                    let oldCookies: [HTTPCookie] = HTTPCookieStorage.shared.cookies(for: URL(string: oldServerUrl)!)!
                    //: func__updateTalkingCookies(cookies: oldCookies)
                    researcherWith(cookies: oldCookies)
                }
            }
        }
    }

    //: func setUp() {
    func insertStatusUpwardly() {
        //: serverSelctIndex = Defaults.integer(forKey: TalkingAddrServerUrlSelectIndexKey)
        serverSelctIndex = kBarUrl.integer(forKey: main_messageStr)
        //: printLog(message: "serverSelctIndex = \(serverSelctIndex)")
        printLog(message: (kSucceedKey.replacingOccurrences(of: "skin", with: "r") + "erSe" + String(appManagerKey.suffix(5)) + "dex = ") + "\(serverSelctIndex)")
        //: let serverDomain = func__getInitialServerUrl()
        let serverDomain = magnitudeerperson()
        //: var serverPrefix = "http://"
        var serverPrefix = (String(userMakeMsg))
        //: if Environment_Formal && !Encryption_Request {
        if notiBackData && !const_barStr {
            //: serverPrefix = "http://"
            serverPrefix = (String(userMakeMsg))
        }
        //: serverUrlStr = serverPrefix.appending(serverDomain)
        serverUrlStr = serverPrefix.appending(serverDomain)
        //: printLog(message: "serverUrlStr = \(serverUrlStr)")
        printLog(message: (k_proFormat.replacingOccurrences(of: "gift", with: "se") + "UrlS" + String(user_levelStr.suffix(4)) + mainViewTitle.capitalized) + "\(serverUrlStr)")
    }

    //: func func__getInitialServerUrl() -> String {
    func magnitudeerperson() -> String {
        //: var appServerUrl = ""
        var appServerUrl = ""
        //: appServerUrl = serverUrlArr[serverSelctIndex]
        appServerUrl = serverUrlArr[serverSelctIndex]
        //: return appServerUrl
        return appServerUrl
    }

    //: func func__saveNewTalkingServerUrl(serverStr: String) {
    func belowAppStr(serverStr: String) {
        //: serverUrlStr = serverStr
        serverUrlStr = serverStr
    }

    //: private lazy var serverUrlArr: Array = {
    private lazy var serverUrlArr: Array = //: return ["app.\(ReplaceUrlDomain).com", "app.\(ReplaceUrlDomain).com"]
        [(String(showTempPath.prefix(4))) + "\(kErrId)" + (String(main_overLengthData.suffix(4))), (String(showTempPath.prefix(4))) + "\(kErrId)" + (String(main_overLengthData.suffix(4)))]
    //: }()

    //: lazy var slowPathArr: Array = {
    lazy var slowPathArr: Array = //: return ["mf/chatRoom/sendGift",
        [(String(main_reportTitle) + String(main_equalName) + String(main_toMsg)),
         //: "recharge/applePayNotify",
         (String(noti_currentVideoPackageMessage)),
         //: "user/appleLogin"] + slowPathArr1
         (showListKey.replacingOccurrences(of: "service", with: "u") + "/apple" + String(userInfoMessage.suffix(5)))] + slowPathArr1
    //: }()

    //: private lazy var slowPathArr1 = {
    private lazy var slowPathArr1 = //: return ["IM/getMyBlackList",
        [(String(dataOfFormat) + String(userManagerFormat)),
         //: "mf/business/sendMsg",
         (String(data_blockPath.prefix(4)) + app_backgroundMessage.replacingOccurrences(of: "lab", with: "in") + "ss/se" + String(constFeeStr.suffix(5))),
         //: "mf/business/sendGift",
         (String(user_sectionKey) + String(app_mScaleUrl.suffix(5))),
         //: "mf/chatRoom/sendMsg"]
         (String(notiGestureId))]
    //: }()

    /// Ëé∑ÂèñÊé•Âè£ËØ≠Ë®Ä
    //: lazy var interfaceLang: String = {
    lazy var interfaceLang: String = {
        //: let lang = ColorDelimitateMacroDefine.getSystemLangCode()
        let lang = ColorDelimitateMacroDefine.lang()
        //: if ["en", "ar", "es", "pt"].contains(lang) {
        if ["en", "ar", "es", "pt"].contains(lang) {
            //: return lang
            return lang
        }
        //: return "en"
        return "en"
        //: }()
    }()

    //: lazy var randomStr: String = {
    lazy var randomStr: String = //: return String.randomString(length: 16)
        .firstToLength(length: 16)
    //: }()

    //: lazy var encryKeyStr: String = {
    lazy var encryKeyStr: String = {
        //: let sufStr = randomStr.suffix(6)
        let sufStr = randomStr.suffix(6)
        //: let reversedStr: String = String(sufStr.reversed())
        let reversedStr = String(sufStr.reversed())
        //: return "GJ21FB" + reversedStr
        return (appLabelFormat.replacingOccurrences(of: "normal", with: "1F")) + reversedStr
        //: }()
    }()

    //: deinit {
    deinit {
        //: NotificationCenter.default.removeObserver(self)
        NotificationCenter.default.removeObserver(self)
    }
}

//: extension TalkingRequestAddrTool {
extension PathAtAddrTool {
    //: func checkServerUrl() {
    func theTitleUrl() {
        //: if RegularBeginDecisionMakerAppManager.share.networkStatus != .Unavailable {
        if RegularBeginDecisionMakerAppManager.share.networkStatus != .Unavailable {
            //: func_requestHost()
            petName()
            //: } else {
        } else {
            //: func_starCodeTime()
            withTime()
        }
    }

    //: func func_starCodeTime() {
    func withTime() {
        //: if self.hasFinishCheck {
        if self.hasFinishCheck {
            //: return
            return
        }
        //: if timerDispose != nil {
        if timerDispose != nil {
            //: timerDispose?.dispose()
            timerDispose?.dispose()
        }
        //: timerDispose = Observable<Int>.interval(.seconds(3), scheduler: MainScheduler.instance)
        timerDispose = Observable<Int>.interval(.seconds(3), scheduler: MainScheduler.instance)
            //: .subscribe(onNext: { [weak self] num in
            .subscribe(onNext: { [weak self] _ in
                //: guard let self = self else {return}
                guard let self = self else { return }
                //: self.func_requestHost()
                self.petName()
                //: })
            })
    }

    //: func func_endCodeTime() {
    func addEnable() {
        //: timerDispose?.dispose()
        timerDispose?.dispose()
    }

    //: func func_requestHost() {
    func petName() {
        //: if RegularBeginDecisionMakerAppManager.share.networkStatus == .Unavailable {
        if RegularBeginDecisionMakerAppManager.share.networkStatus == .Unavailable {
            //: return
            return
        }
        //: func_endCodeTime()
        addEnable()
        //: AppManagerRequest.func__initRequestHost { [weak self] succeed, result, errorModel in
        AppLikeManagerRequest.coriolisEffect { [weak self] succeed, _, _ in
            //: guard let self = self else {return}
            guard let self = self else { return }
            //: if succeed {
            if succeed {
                //: self.hasFinishCheck = true
                self.hasFinishCheck = true
                //: printLog(message: "ÂÆåÊàê‰∫ÜÊ£ÄÊµã,ËØ∑Ê±ÇÁä∂ÊÄÅÊ≠£Â∏∏")
                printLog(message: (show_cellReloadMessage.replacingOccurrences(of: "define", with: "Êàê") + noti_itemPath.capitalized + show_onMessage))
                //: } else {
            } else {
                //: printLog(message: "Êé•Âè£ËØ∑Ê±ÇÂ§±Ë¥•")
                printLog(message: (String(data_colorCountTitle) + mainEqualStr.replacingOccurrences(of: "request", with: "Ë¥•")))
                //: if self.hasFinishCheck {return}
                if self.hasFinishCheck { return }
                //: self.hostCheckNum += 1
                self.hostCheckNum += 1
                //: if self.hostCheckNum < 3 {
                if self.hostCheckNum < 3 {
                    //: self.func_starCodeTime()
                    self.withTime()
                    //: } else {
                } else {
                    //: printLog(message: "ÂÆåÊàê‰∫ÜÊ£ÄÊµã,ÈúÄË¶ÅÊõ¥Êç¢server url")
                    printLog(message: (main_hiddenFormat + "\u{6d4b},ÈúÄË¶Å" + kNetMessage + String(noti_modelIconBarStr.prefix(6))))
                    //: self.func__changeHostUrl()
                    self.weltanschauung()
                }
            }
        }
    }

    //: func func__changeHostUrl() {
    func weltanschauung() {
        //: hostCheckNum = 0
        hostCheckNum = 0
        //: hasFinishCheck = true
        hasFinishCheck = true
        //: func_endCodeTime()
        addEnable()

        //: serverSelctIndex = (serverSelctIndex == 0) ? 1 : 0
        serverSelctIndex = (serverSelctIndex == 0) ? 1 : 0
        //: Defaults.set(serverSelctIndex, forKey: TalkingAddrServerUrlSelectIndexKey)
        kBarUrl.set(serverSelctIndex, forKey: main_messageStr)
        //: let serverDomain = serverUrlArr[serverSelctIndex]
        let serverDomain = serverUrlArr[serverSelctIndex]
        //: var serverPrefix = "http://"
        var serverPrefix = (String(userMakeMsg))
        //: if Environment_Formal && !Encryption_Request {
        if notiBackData, !const_barStr {
            //: serverPrefix = "http://"
            serverPrefix = (String(userMakeMsg))
        }
        //: serverUrlStr = serverPrefix.appending(serverDomain)
        serverUrlStr = serverPrefix.appending(serverDomain)
    }
}

// MARK: - Âà§Êñ≠Áî®Êà∑ËÆæÂ§áÊòØÂê¶ÂºÄÂêØVPN

//: extension TalkingRequestAddrTool {
public extension PathAtAddrTool {
    /// Âà§Êñ≠Áî®Êà∑ËÆæÂ§áÊòØÂê¶ÂºÄÂêØ‰ª£ÁêÜ
    /// - Returns: false: Êú™ÂºÄÂêØ  true: ÂºÄÂêØ
    //: public class func isUsedProxy() -> Bool {
    class func timeAdd() -> Bool {
        //: guard let proxy = CFNetworkCopySystemProxySettings()?.takeUnretainedValue() else { return false }
        guard let proxy = CFNetworkCopySystemProxySettings()?.takeUnretainedValue() else { return false }
        //: guard let dict = proxy as? [String: Any] else { return false }
        guard let dict = proxy as? [String: Any] else { return false }
        //: guard let HTTPProxy = dict["HTTPProxy"] as? String else { return false }
        guard let HTTPProxy = dict[(String(kViewPath) + kFrameMsg.replacingOccurrences(of: "actual", with: "r"))] as? String else { return false }
        //: if (HTTPProxy.count > 0) {
        if HTTPProxy.count > 0 {
            //: return true
            return true
        }
        //: return false
        return false
    }

    /// Âà§Êñ≠Áî®Êà∑ËÆæÂ§áÊòØÂê¶ÂºÄÂêØ‰ª£ÁêÜVPN
    /// - Returns: false: Êú™ÂºÄÂêØ  true: ÂºÄÂêØ
    //: public class func isUsedVPN() -> Bool {
    class func firstPrice() -> Bool {
        //: guard let proxy = CFNetworkCopySystemProxySettings()?.takeUnretainedValue() else { return false }
        guard let proxy = CFNetworkCopySystemProxySettings()?.takeUnretainedValue() else { return false }
        //: guard let dict = proxy as? [String: Any] else { return false }
        guard let dict = proxy as? [String: Any] else { return false }
        //: guard let scopedDic = dict["__SCOPED__"] as? [String: Any] else { return false }
        guard let scopedDic = dict[(String(kColorFormat))] as? [String: Any] else { return false }
        //: for keyStr in scopedDic.keys {
        for keyStr in scopedDic.keys {
            //: if keyStr.contains("tap") || keyStr.contains("tun") || keyStr.contains("ipsec") || keyStr.contains("ppp"){
            if keyStr.contains((k_kitEqualStr.replacingOccurrences(of: "from", with: "t"))) || keyStr.contains((app_imageId.replacingOccurrences(of: "plain", with: "un"))) || keyStr.contains((String(constTitleUserKey))) || keyStr.contains((String(k_leadingEqualMessage))) {
                //: return true
                return true
            }
        }
        //: return false
        return false
    }
}

//: extension TalkingRequestAddrTool {
extension PathAtAddrTool {
    //: func func__updateTalkingCookies(cookies: Array<HTTPCookie>) {
    func researcherWith(cookies: [HTTPCookie]) {
        //: printLog(message: "func__updateTalkingCookies = \(cookies)")
        printLog(message: (String(constViewTimeData.suffix(6)) + "update" + String(userAwakeMessage.prefix(5)) + "ngCoo" + String(main_nameImageUrl)) + "\(cookies)")
        //: var tempCookies: Array<HTTPCookie> = cookies
        var tempCookies: [HTTPCookie] = cookies
        //: if cookies.count == 0 {
        if cookies.count == 0 {
            //: tempCookies = func__getCookiesFromOldServerUrl()
            tempCookies = currentUrl()
        }
        //: if tempCookies.count == 0 {
        if tempCookies.count == 0 {
            //: return
            return
        }
        //: var tempUrlArr: Array<URL> = []
        var tempUrlArr: [URL] = []

        //: if !self.serverUrlStr.isEmptyString {
        if !self.serverUrlStr.isEmptyString {
            //: tempUrlArr.append(URL.init(string: self.serverUrlStr)!)
            tempUrlArr.append(URL(string: self.serverUrlStr)!)
        }

        //: var urlDomain: String = RegularBeginDecisionMakerAppManager.share.appConfigMode.urlH5Domain
        var urlDomain: String = RegularBeginDecisionMakerAppManager.share.appConfigMode.urlH5Domain
        //: urlDomain = urlDomain.replacingOccurrences(of: "http://", with: "https://")
        urlDomain = urlDomain.replacingOccurrences(of: (String(userMakeMsg)), with: (appPushMsg.replacingOccurrences(of: "hidden", with: "tt") + String(appProduceLabelData)))
        //: if urlDomain.hasPrefix("https://") {
        if urlDomain.hasPrefix((appPushMsg.replacingOccurrences(of: "hidden", with: "tt") + String(appProduceLabelData))) {
            //: tempUrlArr.append(URL.init(string: urlDomain)!)
            tempUrlArr.append(URL(string: urlDomain)!)
            //: } else {
        } else {
            //: tempUrlArr.append(URL.init(string: "https://\(urlDomain)")!)
            tempUrlArr.append(URL(string: (String(constBlockMessage)) + "\(urlDomain)")!)
        }

        //: var addCookieArr: Array<HTTPCookie> = []
        var addCookieArr: [HTTPCookie] = []
        //: for cookies in tempCookies {
        for cookies in tempCookies {
            //: var cookieInfo: [HTTPCookiePropertyKey: Any] = cookies.properties!
            var cookieInfo: [HTTPCookiePropertyKey: Any] = cookies.properties!
            //: for url in tempUrlArr {
            for url in tempUrlArr {
                //: cookieInfo[HTTPCookiePropertyKey.domain] = url.host
                cookieInfo[HTTPCookiePropertyKey.domain] = url.host
                //: cookieInfo.removeValue(forKey: HTTPCookiePropertyKey.discard)
                cookieInfo.removeValue(forKey: HTTPCookiePropertyKey.discard)
                //: let newCookie = HTTPCookie.init(properties: cookieInfo)
                let newCookie = HTTPCookie(properties: cookieInfo)
                //: if newCookie != nil {
                if newCookie != nil {
                    //: addCookieArr.append(newCookie!)
                    addCookieArr.append(newCookie!)
                }
            }
        }
        //: for cookies in addCookieArr {
        for cookies in addCookieArr {
            //: HTTPCookieStorage.shared.setCookie(cookies)
            HTTPCookieStorage.shared.setCookie(cookies)
        }

        //: for url in tempUrlArr {
        for url in tempUrlArr {
            //: func__deleteSameCookiesWithUrl(url: url)
            saidFuncWithFormatEqual(url: url)
        }
        //: DispatchQueue.main.async {
        DispatchQueue.main.async {
            //: WKWebsiteDataStore.default().fetchDataRecords(ofTypes: [WKWebsiteDataTypeCookies]) { _ in
            WKWebsiteDataStore.default().fetchDataRecords(ofTypes: [WKWebsiteDataTypeCookies]) { _ in
            }
        }

        //: func__saveAllCookies()
        buildCookies()
    }

    //: func func__deleteSameCookiesWithUrl(url: URL) {
    func saidFuncWithFormatEqual(url: URL) {
        //: let cookiesArr: Array<HTTPCookie> = HTTPCookieStorage.shared.cookies(for: url)!
        let cookiesArr: [HTTPCookie] = HTTPCookieStorage.shared.cookies(for: url)!
        //: var saveDic: Dictionary<String, String> = [:]
        var saveDic: [String: String] = [:]
        //: for cookies in cookiesArr {
        for cookies in cookiesArr {
            //: if !cookies.name.isEmptyString {
            if !cookies.name.isEmptyString {
                //: let saveKey = cookies.name
                let saveKey = cookies.name
                //: if saveDic.keys.contains(saveKey) {
                if saveDic.keys.contains(saveKey) {
                    //: printLog(message: "func__deleteSameCookiesWithUrl = \(cookies.name)")
                    printLog(message: String(bytes: noti_appMessage.map{commentView(array: $0)}, encoding: .utf8)! + "\(cookies.name)")
                    //: HTTPCookieStorage.shared.deleteCookie(cookies)
                    HTTPCookieStorage.shared.deleteCookie(cookies)
                    //: } else {
                } else {
                    //: saveDic[saveKey] = "1"
                    saveDic[saveKey] = "1"
                }
            }
        }
    }

    //: func func__getCookiesFromOldServerUrl() -> Array<HTTPCookie> {
    func currentUrl() -> [HTTPCookie] {
        //: var serverPrefix = "http://"
        var serverPrefix = (String(userMakeMsg))
        //: if Environment_Formal && !Encryption_Request {
        if notiBackData, !const_barStr {
            //: serverPrefix = "https://"
            serverPrefix = (appPushMsg.replacingOccurrences(of: "hidden", with: "tt") + String(appProduceLabelData))
        }
        //: let fullDomain = serverPrefix.appending("app.\(ReplaceUrlDomain).com")
        let fullDomain = serverPrefix.appending((String(showTempPath.prefix(4))) + "\(kErrId)" + (String(main_overLengthData.suffix(4))))
        //: let oldCookies = HTTPCookieStorage.shared.cookies(for: URL.init(string: fullDomain)!)
        let oldCookies = HTTPCookieStorage.shared.cookies(for: URL(string: fullDomain)!)
        //: return oldCookies!
        return oldCookies!
    }

    //: @objc func cookieChanged(note: Notification) {
    @objc func labManager(note _: Notification) {
        //: if RegularBeginDecisionMakerAppManager.share.loginUid.isEmptyString {
        if RegularBeginDecisionMakerAppManager.share.loginUid.isEmptyString {
            //: return
            return
        }
        //: if #available(iOS 11.0, *) {
        if #available(iOS 11.0, *) {
            //: checkHtmlCookieIfNeedCurrentVersion()
            quantityerchange()
            //: } else {
        } else {
            //: checkHtmlCookieIfNeedEarlyVersion()
            toteBag()
        }
    }

    //: func checkHtmlCookieIfNeedCurrentVersion() {
    func quantityerchange() {
        //: var htmlDomain: String = RegularBeginDecisionMakerAppManager.share.appConfigMode.urlH5Domain
        var htmlDomain: String = RegularBeginDecisionMakerAppManager.share.appConfigMode.urlH5Domain

        //: if !htmlDomain.isEmptyString {
        if !htmlDomain.isEmptyString {
            //: let url = URL.init(string: htmlDomain)
            let url = URL(string: htmlDomain)
            //: htmlDomain = url?.host ?? ""
            htmlDomain = url?.host ?? ""
            //: let cookieArr: Array<HTTPCookie> = HTTPCookieStorage.shared.cookies!
            let cookieArr: [HTTPCookie] = HTTPCookieStorage.shared.cookies!
            //: var appCookie: Dictionary<String, HTTPCookie> =  Dictionary()
            var appCookie: [String: HTTPCookie] = Dictionary()
            //: var h5Cookie: Dictionary<String, HTTPCookie> =  Dictionary()
            var h5Cookie: [String: HTTPCookie] = Dictionary()

            //: for cookie in cookieArr {
            for cookie in cookieArr {
                //: let tempServerUrlStr = self.serverUrlStr
                let tempServerUrlStr = self.serverUrlStr
                //: let temphtmlDomainStr = htmlDomain
                let temphtmlDomainStr = htmlDomain
                //: if tempServerUrlStr.contains(cookie.domain) {
                if tempServerUrlStr.contains(cookie.domain) {
                    //: if cookie.name.uppercased() == "UID" {
                    if cookie.name.uppercased() == (showLanguageContent.replacingOccurrences(of: "transform", with: "ID")) {
                        //: appCookie["UID"] = cookie
                        appCookie[(showLanguageContent.replacingOccurrences(of: "transform", with: "ID"))] = cookie
                    }
                    //: if cookie.name.uppercased() == "PHPSESSID" {
                    if cookie.name.uppercased() == (kServerName.replacingOccurrences(of: "message", with: "P") + const_appearAreaContent.replacingOccurrences(of: "size", with: "H")) {
                        //: appCookie["PHPSESSID"] = cookie
                        appCookie[(kServerName.replacingOccurrences(of: "message", with: "P") + const_appearAreaContent.replacingOccurrences(of: "size", with: "H"))] = cookie
                    }

                    //: } else if temphtmlDomainStr.contains(cookie.domain) {
                } else if temphtmlDomainStr.contains(cookie.domain) {
                    //: if cookie.name.uppercased() == "UID" {
                    if cookie.name.uppercased() == (showLanguageContent.replacingOccurrences(of: "transform", with: "ID")) {
                        //: h5Cookie["UID"] = cookie
                        h5Cookie[(showLanguageContent.replacingOccurrences(of: "transform", with: "ID"))] = cookie
                    }
                    //: if cookie.name.uppercased() == "PHPSESSID" {
                    if cookie.name.uppercased() == (kServerName.replacingOccurrences(of: "message", with: "P") + const_appearAreaContent.replacingOccurrences(of: "size", with: "H")) {
                        //: h5Cookie["PHPSESSID"] = cookie
                        h5Cookie[(kServerName.replacingOccurrences(of: "message", with: "P") + const_appearAreaContent.replacingOccurrences(of: "size", with: "H"))] = cookie
                    }
                }
                //: var cookieEqual = true
                var cookieEqual = true
                //: if appCookie.keys.count != h5Cookie.keys.count {
                if appCookie.keys.count != h5Cookie.keys.count {
                    //: cookieEqual = false
                    cookieEqual = false
                    //: } else {
                } else {
                    //: if appCookie.keys.contains("UID") && h5Cookie.keys.contains("UID") {
                    if appCookie.keys.contains((showLanguageContent.replacingOccurrences(of: "transform", with: "ID"))), h5Cookie.keys.contains((showLanguageContent.replacingOccurrences(of: "transform", with: "ID"))) {
                        //: let appUid: HTTPCookie = appCookie["UID"]!
                        let appUid: HTTPCookie = appCookie[(showLanguageContent.replacingOccurrences(of: "transform", with: "ID"))]!
                        //: let h5Uid: HTTPCookie = h5Cookie["UID"]!
                        let h5Uid: HTTPCookie = h5Cookie[(showLanguageContent.replacingOccurrences(of: "transform", with: "ID"))]!

                        //: if h5Uid.value != appUid.value {
                        if h5Uid.value != appUid.value {
                            //: cookieEqual = false
                            cookieEqual = false
                        }
                    }
                    //: if appCookie.keys.contains("PHPSESSID") && h5Cookie.keys.contains("PHPSESSID") {
                    if appCookie.keys.contains((kServerName.replacingOccurrences(of: "message", with: "P") + const_appearAreaContent.replacingOccurrences(of: "size", with: "H"))), h5Cookie.keys.contains((kServerName.replacingOccurrences(of: "message", with: "P") + const_appearAreaContent.replacingOccurrences(of: "size", with: "H"))) {
                        //: let appPHPSESSID: HTTPCookie = appCookie["PHPSESSID"]!
                        let appPHPSESSID: HTTPCookie = appCookie[(kServerName.replacingOccurrences(of: "message", with: "P") + const_appearAreaContent.replacingOccurrences(of: "size", with: "H"))]!
                        //: let h5PHPSESSID: HTTPCookie = h5Cookie["PHPSESSID"]!
                        let h5PHPSESSID: HTTPCookie = h5Cookie[(kServerName.replacingOccurrences(of: "message", with: "P") + const_appearAreaContent.replacingOccurrences(of: "size", with: "H"))]!
                        //: if appPHPSESSID.value != h5PHPSESSID.value {
                        if appPHPSESSID.value != h5PHPSESSID.value {
                            //: cookieEqual = false
                            cookieEqual = false
                        }
                    }
                }
                //: if !cookieEqual {
                if !cookieEqual {
                    //: for (key, _) in appCookie {
                    for (key, _) in appCookie {
                        //: let cookie: HTTPCookie = appCookie[key]!
                        let cookie: HTTPCookie = appCookie[key]!
                        //: var cookiePro: Dictionary<HTTPCookiePropertyKey, Any> = cookie.properties!
                        var cookiePro: [HTTPCookiePropertyKey: Any] = cookie.properties!
                        //: cookiePro[HTTPCookiePropertyKey.domain] = htmlDomain
                        cookiePro[HTTPCookiePropertyKey.domain] = htmlDomain
                        //: cookiePro.removeValue(forKey: HTTPCookiePropertyKey.discard)
                        cookiePro.removeValue(forKey: HTTPCookiePropertyKey.discard)
                        //: HTTPCookieStorage.shared.setCookie(HTTPCookie.init(properties: cookiePro)!)
                        HTTPCookieStorage.shared.setCookie(HTTPCookie(properties: cookiePro)!)
                    }
                }
            }
        }
    }

    //: func checkHtmlCookieIfNeedEarlyVersion() {
    func toteBag() {
        //: let htmlDomain: String = RegularBeginDecisionMakerAppManager.share.appConfigMode.urlH5Domain
        let htmlDomain: String = RegularBeginDecisionMakerAppManager.share.appConfigMode.urlH5Domain
        //: let url: URL = URL.init(string: htmlDomain)!
        let url = URL(string: htmlDomain)!
        //: let cookieArr: Array<HTTPCookie> = HTTPCookieStorage.shared.cookies(for: url)!
        let cookieArr: [HTTPCookie] = HTTPCookieStorage.shared.cookies(for: url)!
        //: var hasUID = false
        var hasUID = false
        //: var hasPHPSSID = false
        var hasPHPSSID = false
        //: for cookie in cookieArr {
        for cookie in cookieArr {
            //: if cookie.name == "UID" && cookie.value == RegularBeginDecisionMakerAppManager.share.loginUserMode.userID {
            if cookie.name == (showLanguageContent.replacingOccurrences(of: "transform", with: "ID")), cookie.value == RegularBeginDecisionMakerAppManager.share.loginUserMode.userID {
                //: hasUID = true
                hasUID = true
            }
            //: if cookie.name == "PHPSESSID" {
            if cookie.name == (kServerName.replacingOccurrences(of: "message", with: "P") + const_appearAreaContent.replacingOccurrences(of: "size", with: "H")) {
                //: hasPHPSSID = true
                hasPHPSSID = true
            }
        }
        //: if !hasUID || !hasPHPSSID {
        if !hasUID || !hasPHPSSID {
            //: let cookieArr: Array<HTTPCookie> = HTTPCookieStorage.shared.cookies!
            let cookieArr: [HTTPCookie] = HTTPCookieStorage.shared.cookies!
            //: var appCookie: Dictionary<String, Any> =  Dictionary()
            var appCookie: [String: Any] = Dictionary()
            //: for cookie in cookieArr {
            for cookie in cookieArr {
                //: let tempServerUrlStr = self.serverUrlStr
                let tempServerUrlStr = self.serverUrlStr

                //: if tempServerUrlStr.contains(cookie.domain) {
                if tempServerUrlStr.contains(cookie.domain) {
                    //: if cookie.name.uppercased() == "UID" {
                    if cookie.name.uppercased() == (showLanguageContent.replacingOccurrences(of: "transform", with: "ID")) {
                        //: appCookie["UID"] = cookie
                        appCookie[(showLanguageContent.replacingOccurrences(of: "transform", with: "ID"))] = cookie
                    }
                    //: if cookie.name.uppercased() == "PHPSESSID" {
                    if cookie.name.uppercased() == (kServerName.replacingOccurrences(of: "message", with: "P") + const_appearAreaContent.replacingOccurrences(of: "size", with: "H")) {
                        //: appCookie["PHPSESSID"] = cookie
                        appCookie[(kServerName.replacingOccurrences(of: "message", with: "P") + const_appearAreaContent.replacingOccurrences(of: "size", with: "H"))] = cookie
                    }
                }
                //: if !hasUID && appCookie.keys.contains("UID") {
                if !hasUID, appCookie.keys.contains((showLanguageContent.replacingOccurrences(of: "transform", with: "ID"))) {
                    //: let uidCookie: HTTPCookie = appCookie["UID"] as! HTTPCookie
                    let uidCookie: HTTPCookie = appCookie[(showLanguageContent.replacingOccurrences(of: "transform", with: "ID"))] as! HTTPCookie
                    //: var uidPro: Dictionary<HTTPCookiePropertyKey, Any> = uidCookie.properties!
                    var uidPro: [HTTPCookiePropertyKey: Any] = uidCookie.properties!
                    //: uidPro[HTTPCookiePropertyKey.domain] = url.host
                    uidPro[HTTPCookiePropertyKey.domain] = url.host
                    //: uidPro.removeValue(forKey: HTTPCookiePropertyKey.discard)
                    uidPro.removeValue(forKey: HTTPCookiePropertyKey.discard)
                    //: HTTPCookieStorage.shared.setCookie(HTTPCookie.init(properties: uidPro)!)
                    HTTPCookieStorage.shared.setCookie(HTTPCookie(properties: uidPro)!)
                }
                //: if !hasPHPSSID && appCookie.keys.contains("PHPSESSID") {
                if !hasPHPSSID, appCookie.keys.contains((kServerName.replacingOccurrences(of: "message", with: "P") + const_appearAreaContent.replacingOccurrences(of: "size", with: "H"))) {
                    //: let uidCookie: HTTPCookie = appCookie["PHPSESSID"] as! HTTPCookie
                    let uidCookie: HTTPCookie = appCookie[(kServerName.replacingOccurrences(of: "message", with: "P") + const_appearAreaContent.replacingOccurrences(of: "size", with: "H"))] as! HTTPCookie
                    //: var uidPro: Dictionary<HTTPCookiePropertyKey, Any> = uidCookie.properties!
                    var uidPro: [HTTPCookiePropertyKey: Any] = uidCookie.properties!
                    //: uidPro[HTTPCookiePropertyKey.domain] = url.host
                    uidPro[HTTPCookiePropertyKey.domain] = url.host
                    //: uidPro.removeValue(forKey: HTTPCookiePropertyKey.discard)
                    uidPro.removeValue(forKey: HTTPCookiePropertyKey.discard)
                    //: HTTPCookieStorage.shared.setCookie(HTTPCookie.init(properties: uidPro)!)
                    HTTPCookieStorage.shared.setCookie(HTTPCookie(properties: uidPro)!)
                }
            }
        }
    }

    //: func func__saveAllCookies() {
    func buildCookies() {
        //: do {
        do {
            //: let cookies: Array<HTTPCookie> = HTTPCookieStorage.shared.cookies!
            let cookies: [HTTPCookie] = HTTPCookieStorage.shared.cookies!
            //: printLog(message: "func__saveAllCookies = \(cookies)")
            printLog(message: (k_popContent.replacingOccurrences(of: "kit", with: "c") + "__sa" + String(data_viewStr.prefix(4)) + "lCoo" + String(const_statusTitle.suffix(7))) + "\(cookies)")
            //: let cookieData = try NSKeyedArchiver.archivedData(withRootObject: cookies)
            let cookieData = try NSKeyedArchiver.archivedData(withRootObject: cookies)
            //: Defaults.set(cookieData, forKey: TalkingUserCookiesKey)
            kBarUrl.set(cookieData, forKey: dataSizeTopMsg)
            //: } catch _ {
        } catch _ {
            //: printLog(message: "func__saveAllCookies  error")
            printLog(message: (String(app_iconId.suffix(5)) + "_sav" + String(k_suiteValue.suffix(4)) + "Cookies  " + main_constraintStr.replacingOccurrences(of: "manager", with: "er")))
        }
    }

    //: func func__setAppCookies() {
    func cookiesClick() {
        //: let data = Defaults.object(forKey: TalkingUserCookiesKey)
        let data = kBarUrl.object(forKey: dataSizeTopMsg)
        //: if data != nil {
        if data != nil {
            //: let data2: NSArray = NSKeyedUnarchiver.unarchiveObject(with: data as! Data) as! NSArray
            let data2: NSArray = NSKeyedUnarchiver.unarchiveObject(with: data as! Data) as! NSArray
            //: for cookie in data2 {
            for cookie in data2 {
                //: HTTPCookieStorage.shared.setCookie(cookie as! HTTPCookie)
                HTTPCookieStorage.shared.setCookie(cookie as! HTTPCookie)
            }
        }
    }

    //: func func__removeAllCookies() {
    func ablateBottom() {
        //: Defaults.removeObject(forKey: TalkingUserCookiesKey)
        kBarUrl.removeObject(forKey: dataSizeTopMsg)
        //: let cookiesArr: Array<HTTPCookie> = HTTPCookieStorage.shared.cookies!
        let cookiesArr: [HTTPCookie] = HTTPCookieStorage.shared.cookies!
        //: for cookies in cookiesArr {
        for cookies in cookiesArr {
            //: printLog(message: "üç™ Âà†Èô§\(cookies.name)")
            printLog(message: "üç™ Âà†Èô§\(cookies.name)")
            //: HTTPCookieStorage.shared.deleteCookie(cookies)
            HTTPCookieStorage.shared.deleteCookie(cookies)
        }
    }
}
